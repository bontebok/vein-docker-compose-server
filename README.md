# Vein Dedicated Server (Docker Compose)

This Docker container runs a fully automated **Vein** dedicated server. All configuration for `Game.ini` and `Engine.ini` is done **entirely through environment variables**.

On startup, the container reads those variables and **updates only the values you specify**, preserving everything else (including settings the game itself modifies while running).

This means:

* You never manually edit `Game.ini` or `Engine.ini`  
* Only the variables you set in the container environment are enforced  
* Any settings modified in-game or generated by the server stay intact  
* You can add new settings at any time simply by adding more environment variables

---

## Quick start

1. Clone this repository onto your server.

```
git clone https://github.com/bontebok/vein-docker-compose-server.git
```
or,
```
gh repo clone bontebok/vein-docker-compose-server
```

2. Copy the sample environment variable file to vein_server.env

```
cp vein_server.env.sample vein_server.env
```

3. Edit the vein_server.env file and customize it. Use your favorite editor. Remember to set a password if you want to password protect your server.

```
nano vein_server.env
```

4. Build and start the container.

```
docker compose build
docker compose up -d
```

5. If you need to change or add a configuration entry into the environment file, you must rebuild your container and restart the server.

```
docker compose build
docker compose up -d
```
 
---

## Configuration Path

### Configuring the Server Using Environment Variables

Every server setting is controlled by an environment variable with this pattern:

```
<FILE PREFIX><SECTION PREFIX><ENCODED_KEY>=<value>
```

### Config File / Section variable prefixes

Start the variable by naming it with the appropriate prefix using the table below based on the configuration file and configuration section.

| File       | Section                        | Prefix                         |
| ---------- | ------------------------------ | ------------------------------ |
| Game.ini   | `[/Script/Engine.GameSession]`   | `GAME_GAMESESSION_`            |
| Game.ini   | `[/Script/Vein.VeinGameSession]` | `GAME_VEIN_GAMESESSION_`       |
| Game.ini   | `[OnlineSubsystemSteam]`         | `GAME_ONLINE_SUBSYSTEM_STEAM_` |
| Game.ini   | `[URL]`                          | `GAME_URL_`                    |
| Game.ini   | `[/Script/Vein.ServerSettings]`  | `GAME_SERVERSETTINGS_`         |
| Engine.ini | `[Core.Log]`                     | `ENGINE_CORE_LOG_`             |
| Engine.ini | `[ConsoleVariables]`             | `ENGINE_CONSOLEVARIABLES_`     |

### Key name encoding

Next, append the name of the variable found in the config file. Environment variable key names cannot contain certain characters, so the following substitution rules are used:

| Actual Character | Encoded As     |
| ---------------- | -------------- |
| `.`              | `_DOT_`        |
| `_`              | `_UNDERSCORE_` |

### Environment variable examples

---

Let's say we want to set the config value `Port` to `777` found in the `[URL]` section of the `Game.ini` file. The environment variable entry would be:

```
GAME_URL_Port=7777
```

To disable PvP, we need to set the config value `vein.PvP` to `0` found in the `[ConsoleVariable]` section of the `Engine.ini` file. The period should be replaced with a `_DOT_` as per the encoding table above. The environment variable entry would be:

```
ENGINE_CONSOLEVARIABLES_vein_DOT_PvP=0
```


See the vein_server.env.sample file for examples on how to name the environment variables for each configuration file and section.
