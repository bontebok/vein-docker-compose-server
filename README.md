# Vein Dedicated Server (Docker Compose)

This Docker container runs a fully automated **Vein** dedicated server. All configuration for `Game.ini` and `Engine.ini` is done **entirely through environment variables**.

On startup, the container reads those variables and **updates only the values you specify**, preserving everything else (including settings the game itself modifies while running).

This means:

### You never manually edit `Game.ini` or `Engine.ini`  
### Only the variables you set in the container environment are enforced  
### Any settings modified in-game or generated by the server stay intact  
### You can add new settings at any time simply by adding more environment variables

---

## Quick start

1. Clone this repository onto your server.

```git clone bontebok/vein-docker-compose-server```
- OR -
```gh repo clone bontebok/vein-docker-compose-server```

2. Copy the sample environment variable file to vein_server.env

```cp vein_server.env.sample vein_server.env```

3. Edit the vein_server.env file and customize it. Use your favorite editor. Remember to set a password if you want to password protect your server.

```nano vein_server.env```

4. Build and start the container.

```
docker compose build
docker compose up -d
```

5. If you need to change or add a configuration entry into the environment file, you must rebuild your container and restart the server.

```
docker compose build
docker compose up -d
```
 
---

## Configuration Path

### Configuring the Server Using Environment Variables

Every server setting is controlled by an environment variable with this pattern:

<FILE PREFIX><SECTION PREFIX><ENCODED_KEY>=<value>

### File prefixes

| Prefix    | Target File  |
| --------- | ------------ |
| `GAME_`   | `Game.ini`   |
| `ENGINE_` | `Engine.ini` |

### Section prefixes

| File       | Section                        | Prefix                         |
| ---------- | ------------------------------ | ------------------------------ |
| Game.ini   | `/Script/Engine.GameSession`   | `GAME_GAMESESSION_`            |
| Game.ini   | `/Script/Vein.VeinGameSession` | `GAME_VEIN_GAMESESSION_`       |
| Game.ini   | `OnlineSubsystemSteam`         | `GAME_ONLINE_SUBSYSTEM_STEAM_` |
| Game.ini   | `URL`                          | `GAME_URL_`                    |
| Game.ini   | `/Script/Vein.ServerSettings`  | `GAME_SERVERSETTINGS_`         |
| Engine.ini | `Core.Log`                     | `ENGINE_CORE_LOG_`             |
| Engine.ini | `ConsoleVariables`             | `ENGINE_CONSOLEVARIABLES_`     |

### Key name encoding

Environment variable key names cannot contain certain characters, so the following substitution rules are used:

| Actual Character | Encoded As     |
| ---------------- | -------------- |
| `.`              | `_DOT_`        |
| `_`              | `_UNDERSCORE_` |

See the vein_server.env.sample file for examples on how to name the environment variables for each configuration file and section.
